<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voight-Kampff Test - The Hunt</title>
    <link rel="stylesheet" href="blade-runner-vk.css">
    <script src="assets/js/atmosphere.js"></script>
</head>
<body>
    <div class="container">
        <div class="test-interface">
            <!-- Main Control Panel -->
            <div class="vk-machine">
                <div class="machine-header">
                    <h1>VOIGHT-KAMPFF TEST PROTOCOL</h1>
                    <div class="status-bar">
                        <div class="status-item">STATUS: <span class="status-active">ACTIVE</span></div>
                        <div class="status-item">SUBJECT: <span id="subjectId">UNKNOWN</span></div>
                        <div class="status-item">RESPONSES: <span id="responseCount">0/20</span></div>
                    </div>
                </div>

                <!-- Subject Identification Panel -->
                <div class="identification-panel" id="identificationPanel">
                    <div class="id-header">SUBJECT IDENTIFICATION REQUIRED</div>
                    <div class="id-form">
                        <label for="subjectName">ENTER FULL NAME:</label>
                        <input type="text" id="subjectName" class="name-input" placeholder="FIRST LAST" maxlength="50">
                        <button class="id-submit-btn" onclick="submitIdentification()">SUBMIT FOR BACKGROUND CHECK</button>
                    </div>
                    <div class="background-check" id="backgroundCheck" style="display: none;">
                        <div class="check-header">RUNNING BACKGROUND VERIFICATION...</div>
                        <div class="check-progress">
                            <div class="progress-bar-bg">
                                <div class="progress-bar-fill" id="progressFill"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VK Test Interface - Hidden until background check complete -->
                <div class="vk-test-interface" id="vkTestInterface" style="display: none;">
                    <!-- Eye Display -->
                    <div class="eye-monitor">
                        <div class="eye-display">
                            <!-- Video Eye -->
                            <video id="eyeVideo" autoplay loop muted playsinline>
                                <source src="assets/videos/eye-monitor.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <div class="biometric-readings">
                            <div class="eye-readings">
                                <div class="reading">DILATION: <span id="dilation">0.0</span>mm</div>
                                <div class="reading">CONTRACTION: <span id="contraction">0.0</span>%</div>
                                <div class="reading">RESPONSE: <span id="response">NOMINAL</span></div>
                            </div>
                            <div class="environmental-readings">
                                <div class="reading">SKIN TEMP: <span id="skinTemp">36.5</span>°C</div>
                                <div class="reading">MOISTURE: <span id="moisture">45</span>%</div>
                                <div class="reading">HUMIDITY: <span id="humidity">38</span>%</div>
                            </div>
                        </div>
                        <div class="heart-display">
                            <!-- Video Heart -->
                            <video id="heartVideo" autoplay loop muted playsinline>
                                <source src="assets/videos/video-heart.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                        <div class="heart-readings">
                            <div class="reading">HEART RATE: <span id="heartRate">72</span> BPM</div>
                            <div class="reading">VARIABILITY: <span id="heartVariability">45</span>ms</div>
                            <div class="reading">RHYTHM: <span id="heartRhythm">NORMAL</span></div>
                        </div>
                    </div>

                    <!-- Stress Indicator -->
                    <div class="stress-indicator">
                        <div class="gauge-section">
                            <div class="gauge-title">EMPATHY RESPONSE METER</div>
                            <div class="needle-container">
                                <div class="needle" id="stressNeedle"></div>
                                <div class="gauge-labels">
                                    <span class="label-green">HUMAN</span>
                                    <span class="label-yellow">UNCERTAIN</span>
                                    <span class="label-red">REPLICANT</span>
                                </div>
                            </div>
                            <div class="gauge-readout">
                                <span class="readout-label"></span>
                                <span class="readout-value" id="responseLevel"></span>
                            </div>
                        </div>
                        <div class="led-panel">
                            <div class="panel-title">STATUS INDICATORS</div>
                            <div class="led-display">
                                <div class="led-row">
                                    <div class="led" id="led1"></div>
                                    <span class="led-label">BASELINE</span>
                                </div>
                                <div class="led-row">
                                    <div class="led" id="led2"></div>
                                    <span class="led-label">EMPATHY</span>
                                </div>
                                <div class="led-row">
                                    <div class="led" id="led3"></div>
                                    <span class="led-label">STRESS</span>
                                </div>
                                <div class="led-row">
                                    <div class="led" id="led4"></div>
                                    <span class="led-label">ANOMALY</span>
                                </div>
                                <div class="led-row">
                                    <div class="led" id="led5"></div>
                                    <span class="led-label">ALERT</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Scanning Video Display -->
                        <div class="scanning-display">
                            <div class="scanning-header">REPLICANT DETECTION</div>
                            <video id="scanningVideo" autoplay loop muted playsinline>
                                <source src="assets/videos/scanning for replicant.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        </div>
                    </div>

                    <!-- Question Display -->
                    <div class="question-panel">
                        <div class="question-text" id="questionText">
                            Initializing Voight-Kampff Test Protocol...
                        </div>
                        <div class="answer-options" id="answerOptions" style="display: none;">
                            <button class="answer-btn" onclick="selectAnswer(1)">A</button>
                            <button class="answer-btn" onclick="selectAnswer(2)">B</button>
                            <button class="answer-btn" onclick="selectAnswer(3)">C</button>
                            <button class="answer-btn" onclick="selectAnswer(4)">D</button>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="controls">
                        <button class="control-btn" id="startBtn" onclick="startTest()" style="display: none;">INITIALIZE TEST</button>
                        <div class="progress-indicator" id="progressIndicator" style="display: none;">
                            <span>Processing response...</span>
                            <div class="progress-bar">
                                <div class="progress-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Combined Terminal and Background Results -->
            <div class="terminal">
                <div class="terminal-header">SYSTEM LOG & BACKGROUND VERIFICATION</div>
                <div class="terminal-content" id="terminalContent">
                    > Voight-Kampff Test System v2.1 Online<br>
                    > Waiting for subject identification...<br>
                    > All systems nominal<br>
                </div>
                <div class="background-results" id="backgroundResults" style="display: none;">
                    <div class="results-divider">═══ BACKGROUND VERIFICATION RESULTS ═══</div>
                    <div class="results-content" id="resultsContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio -->
    <audio id="ambientAudio" loop preload="auto" style="display: none;">
        <source src="assets/audio/leons-interrogation.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="newLifeAudio" preload="auto" style="display: none;">
        <source src="assets/audio/a new life awaits.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <audio id="alarmAudio">
        <source src="assets/audio/alarm_clock.ogg" type="audio/ogg">
    </audio>
    <audio id="successAudio">
        <source src="assets/audio/beep_short.ogg" type="audio/ogg">
    </audio>

    <!-- Results Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="result-display">
                <h2 id="resultTitle">TEST COMPLETE</h2>
                <div id="resultMessage"></div>
                <div id="countdownTimer" style="display: none; margin-top: 20px; font-size: 14px; color: #ff0000; text-align: center;"></div>
                <button id="proceedBtn" class="proceed-btn" style="display: none;" onclick="proceedToNext()">PROCEED TO NEXT PHASE</button>
            </div>
        </div>
    </div>

    <script src="blade-runner-vk.js"></script>
    <script>
        // Simple parallax scrolling effect
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const rain = document.querySelector('.rain');
            const container = document.querySelector('.container');

            if (rain) {
                rain.style.transform = `translateY(${scrolled * 0.5}px)`;
            }

            if (container) {
                container.style.backgroundPosition = `center ${scrolled * 0.3}px`;
            }
        });
    </script>
</body>
</html>
